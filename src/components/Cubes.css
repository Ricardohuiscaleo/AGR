:root {
  --col-gap: 5%;
  --row-gap: 5%;
  --cube-perspective: 99999999px;
  --cube-face-border: 2px dashed #5227FF;
  --cube-face-bg: #1a1a2e;
}

.cubes-animation {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  pointer-events: auto;
  overflow: hidden;
}

.cubes-dynamic-bg {
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: 
    radial-gradient(circle at 20% 30%, rgba(71, 85, 105, 0.4) 0%, transparent 50%),
    radial-gradient(circle at 80% 70%, rgba(51, 65, 85, 0.3) 0%, transparent 50%),
    radial-gradient(circle at 40% 80%, rgba(30, 41, 59, 0.5) 0%, transparent 50%),
    linear-gradient(135deg, 
      #1e293b 0%, 
      #334155 25%, 
      #475569 50%, 
      #64748b 75%, 
      #1e293b 100%
    );
  background-size: 300% 300%, 250% 250%, 400% 400%, 200% 200%;
  animation: cubesGradientShift 10s ease-in-out infinite,
             cubesColdShift 15s linear infinite;
  z-index: -1;
}

.cubes-animation--scene {
  display: grid;
  width: 100%;
  height: 100%;
  column-gap: var(--col-gap);
  row-gap: var(--row-gap);
  perspective: var(--cube-perspective);
  grid-auto-rows: 1fr;
}

.cube {
  position: relative;
  width: 100%;
  height: 100%;
  aspect-ratio: 1 / 1;
  transform-style: preserve-3d;
}

.cube::before {
  content: '';
  position: absolute;
  top: -36px;
  right: -36px;
  bottom: -36px;
  left: -36px;
}

.cubes-animation .cube-face {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--cube-face-bg);
  border: var(--cube-face-border);
  opacity: 1;
  box-shadow: var(--cube-face-shadow, none);
}

.cubes-animation .cube-face--top {
  transform: translateY(-50%) rotateX(90deg);
}

.cubes-animation .cube-face--bottom {
  transform: translateY(50%) rotateX(-90deg);
}

.cubes-animation .cube-face--left {
  transform: translateX(-50%) rotateY(-90deg);
}

.cubes-animation .cube-face--right {
  transform: translateX(50%) rotateY(90deg);
}

.cubes-animation .cube-face--back,
.cubes-animation .cube-face--front {
  transform: rotateY(-90deg) translateX(50%) rotateY(90deg);
}

@keyframes cubesGradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes cubesColdShift {
  0% { 
    filter: hue-rotate(0deg) brightness(0.7) contrast(1.1);
    background-position: 0% 0%, 100% 100%, 50% 50%, 0% 50%;
  }
  25% { 
    filter: hue-rotate(15deg) brightness(0.8) contrast(1.0);
    background-position: 25% 25%, 75% 75%, 75% 25%, 25% 75%;
  }
  50% { 
    filter: hue-rotate(30deg) brightness(0.9) contrast(0.9);
    background-position: 50% 50%, 50% 50%, 100% 0%, 50% 100%;
  }
  75% { 
    filter: hue-rotate(15deg) brightness(0.8) contrast(1.0);
    background-position: 75% 75%, 25% 25%, 25% 75%, 75% 25%;
  }
  100% { 
    filter: hue-rotate(0deg) brightness(0.7) contrast(1.1);
    background-position: 100% 100%, 0% 0%, 0% 100%, 100% 0%;
  }
}

@media (max-width: 768px) {
  .cubes-animation {
    width: 100%;
  }
  
  .cubes-dynamic-bg {
    animation-duration: 8s, 12s;
    background-size: 250% 250%, 200% 200%, 300% 300%, 150% 150%;
  }
}